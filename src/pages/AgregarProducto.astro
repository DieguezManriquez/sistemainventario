---
import Layout from "../layouts/Layout.astro";
import { unidades } from "../constantes";
---

<Layout title="Welcome to Astro.">
    <h1>Registarar producto</h1>
    <label for=""> Producto</label>
    <input type="text" id="producto" />
    <label for=""> Cantidad</label>
    <input type="number" id="cantidad" />
    <label for=""></label>
    <select name="" id="unidades">
        {unidades.map((unidad) => <option value={unidad}>{unidad}</option>)}
    </select>
    <label for="">Fecha ingreso producto</label>
    <input type="date" id="fecha" />
    <button id="button">Registrar Producto</button>
    <a href="/ListarProductos"> Listar</a>
    <button id="botonListar">Listar </button>
</Layout>
<script>
    import { agregarProducto, productos } from "../constantes";
    const boton = document.getElementById("button");

    boton.addEventListener("click", () => {
        const id = (document.getElementById("producto") as HTMLInputElement)
            .value;
        const cantidad = (
            document.getElementById("cantidad") as HTMLInputElement
        ).value;
        const unidad = (document.getElementById("unidades") as HTMLInputElement)
            .value;
        const fecha = (document.getElementById("fecha") as HTMLInputElement)
            .value;
        parseInt(cantidad);
        const producto = {
            id: id,
            nombre: id,
            cantidad: cantidad,
            unidad: unidad,
            fechaIngreso: fecha,
        };
        agregarProducto(producto);
        console.log(producto);
    });
    const boton2 = document.getElementById("botonListar");
    boton2.addEventListener("click", () => {
        console.log(productos);
    });
</script>
